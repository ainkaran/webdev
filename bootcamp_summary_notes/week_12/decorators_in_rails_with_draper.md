# Decorators in Rails with Draper
A decorator is a design pattern that extends an object with more methods and functionalities. When used for views it's sometimes called a `presenter`. It's a great pattern to use when views in Rails are getting cluttered with too much logic. Here is [link to the Draper gem](https://github.com/drapergem/draper).
## Using the Draper gem
You can use decorators using simple Ruby classes. That said, there are gems, such as `draper`, that make the job easier. Let's start by adding the `draper` gem to our `Gemfile`:
```ruby
# ...
gem 'draper'
# ...
```
We will need to generate a decorator class for the ActiveRecord class:
```shell
rails generate decorator Campaign
```
Will generate a file `/app/decorators/campaign_decorator.rb` that looks like:
```ruby
class CampaignDecorator < Draper::Decorator
  delegate_all
  # ...
end
```
Make sure to add the following line in your `/config/application.rb` file within the `class Application < Rails::Application` section:
```ruby
config.autoload_paths << Rails.root.join('app', 'decorators')
```
This will help the decorator classes to get loaded properly in the Rails console. `Draper` will add a method called `decorate` for all of your `ActiveRecord` objects after creating the decorator class. You can use it as follows:
```ruby
def show
  @campaign = Campaign.find(params[:id])
  @campaign = @campaign.decorate
end
```
The `@campaign` object now has all the methods that normally come from the `ActiveRecord` class because of the `delegate_all` method automatically being added by `Draper`. We can also add methods to the `CampaignDecorator` class that we can be used in addition to that.

## Using `object` method
Any time you want to reference the object being decorated, you can use the `object` method given to you by `Draper` as in:
```ruby
class CampaignDecorator < Draper::Decorator
  delegate_all

  def upcased_title
    object.title.upcase
  end

  def end_date
    object.end_date.strftime("%Y-%b-%d %H:%M")
  end

end
```
We can use the above in your views such as in:
```erb
<h1><%= @campaign.upcased_title %></h1>
<p>End Date: <%= @campaign.end_date %></p>
```
## Using `h` method
If you want to reference a built-in Rails helper you can use the `h` method provided by `Draper` as in :
```ruby
def goal
  h.number_to_currency(object.goal)
end

def publish_button
  if object.may_publish?
    h.link_to("Publish", h.campaign_publishings_path(object), {method: :post, class: "btn btn-primary"})
  end
end
```
In the above code, `link_to` and `number_to_currency` are helpers that are built-in with Rails. Also, `campaign_publishings_path` is a route helper that was automatically generated by Rails using the rules we've put in `/config/routes.rb` file.
